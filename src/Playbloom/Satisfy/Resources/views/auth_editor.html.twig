{% extends "base.html.twig" %}
{% form_theme form 'form/jquery.collection.html.twig' 'form/auth.html.twig' %}

{% block title %}Satify: Auth-Editor{% endblock %}

{% block content %}
    {{ form_start(form, { attr: { class: 'form-horizontal' }}) }}
    <h2 class="form-signin-heading glyphicon glyphicon-lock">Auth-Editor</h2>
    <div class="form-group">
        <div class="alert alert-info">
            <span class="glyphicon glyphicon-info-sign"></span>
            Copy the public key and add it as Deploy Key to your repository
        </div>
        <pre style="white-space: normal">{{ pubKey }}</pre>
    </div>
    {{ form_errors(form) }}
    {{ form_widget(form) }}
    <div class="form-group">
        <button class="btn btn-large btn-primary pull-right" type="submit">Submit</button>
    </div>
    {{ form_end(form) }}
{% endblock %}

{% block javascript %}
    {{ parent() }}
    <script src="{{ asset('js/jquery.collection.js') }}"></script>
    <script type="text/javascript">
        $(".collection_auth").collection({
            add: '<p class="col-sm-2"><button class="btn btn-default"><i class="glyphicon glyphicon-plus"></i></button></p>',
            remove: '<button class="btn btn-default"><i class="glyphicon glyphicon-minus"></i></button>',
            allow_down: false,
            allow_up: false,
            add_at_the_end: true
        });
    </script>
{% endblock %}
